package go_clipper2

import (
	"reflect"
	"testing"
)

func TestRectClipPaths64(t *testing.T) {
	var (
		shape_cnt       = 100
		width     int64 = 400
		height    int64 = 400
		margin    int64 = int64(width / 6)
		shapes          = Paths64{
			MakePath64(20, 20, 20, 0, 40, 0, 40, 20, 60, 20, 60, 40, 40, 40, 40, 60, 20, 60, 20, 40, 0, 40, 0, 20),
			MakePath64(20, 60, 20, 20, 0, 20, 0, 0, 60, 0, 60, 20, 40, 20, 40, 60),
			MakePath64(0, 0, 60, 0, 60, 20, 20, 20, 20, 40, 60, 40, 60, 60, 0, 60),
		}
		rect   = NewRect64(margin, margin, width-margin, height-margin)
		expect = Paths64{
			{{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}}, {{147, 187}, {147, 147}, {127, 147}, {127, 127}, {187, 127}, {187, 147}, {167, 147}, {167, 187}},
		}
		w     = width - 60
		h     = height - 60
		match = 2147483647 // rand.Int()
	)

	subject := make(Paths64, 0)
	for i := 0; i < shape_cnt; i++ {
		subject = append(subject, TranslatePath64(shapes[match%3], int64(match%int(w)), int64(match%int(h))))
	}

	results := RectClipPaths64(rect, subject)
	if !reflect.DeepEqual(results, expect) {
		t.Errorf("got %v \n \t\t\t\t expect %v", results, expect)
	}
}
